<?xml version="1.0" ?>

<!--
    Copyright 2005 Open Source Applications Foundation

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<catalog>
    <!--
        command-chain for importing a webdav collection into the jcr repository
    -->
    <chain name="import-collection">
        <!--
            create a new node with the given node type using the systemid of
            the resource to be imported. the current node of the import context
            is set to the newly created node.
            @param nodeType the node type of the node to be created
            @return false
        -->
        <command
            id="add-folder"
            className="org.apache.jackrabbit.server.io.AddNodeCommand"
            nodeType="nt:folder"
        />
    </chain>

    <!--
        command-chain for importing a webdav non-collection-resource into the jcr repository
    -->
    <chain name="import-resource">
        <!--
            registers the content type of the resource in the import context
            @return false
        -->
        <command
            id="set-contenttype"
            className="org.apache.jackrabbit.server.io.SetContentTypeCommand"
        />

        <!--
            if content type is application/zip, this command recursivly imports
            the contents of the zip.
            @return true, if the command completed; false otherwise.
        -->
        <command
            id="import-zip"
            className="org.apache.jackrabbit.server.io.ZIPImportCommand"
        />

        <!--
            if the content type matches 'text/xml' the content of the resource
            i considered as xml and deserialized into the jcr repository.
            @return false
        -->
        <!--
        <command
            id="import-xml"
            className="org.apache.jackrabbit.server.io.XMLImportCommand"
        />
        -->

        <!--
            the content of the resource is added a nt:resource to the repository
            @return false
        -->
        <command
            id="import-file"
            className="org.apache.jackrabbit.server.io.FileImportCommand"
        />
        
        <!--
            adds a mixin nodetype to the current node
            @param nodeType the mixin node type to add
            @return false
        -->
        <command
            id="make-versionable"
            className="org.apache.jackrabbit.server.io.AddMixinCommand"
            nodeType="mix:versionable"
        />

    </chain>

    <!--
        command-chain for exporting collections
    -->
    <chain name="export-collection">
        <!--
            exports a HTML listing of the child nodes of the exported collection.
            nodes are displayed as directory links if they are either explicitely listed in the
            'collectionNodeTypes' parameter or if they are NOT listed in the 'nonCollectionNodeTypes' 
            parameter. if both parameters are omitted any child node is displayed as directory link.
            @param collectionNodeTypes optional node type names for collections (comma separated)
            @param nonCollectionNodeTypes optional node type names for non-collections (comma separated)
            @return true
        -->
        <command
            id="export-dirlisting"
            className="org.apache.jackrabbit.server.io.DirListingExportCommand"
            nonCollectionNodeTypes="nt:resource, nt:file"
        />
    </chain>

    <!--
        command-chain for exporting non-collection-resources
    -->
    <chain name="export-resource">
        <!--
            exports the jcr:data property if the node contains a jcr:content
            node of type nt:resource.
            @return true if the node was exported; false otherwise.
        -->
        <command
            id="export-file"
            className="org.apache.jackrabbit.server.io.FileExportCommand"
        />
        <!--
            exports the node as docview or sysview content
            @param mode the export mode. either 'docview' or 'sysview'
            @return true
        -->
        <!--
        <command
            id="export-docxml"
            className="org.apache.jackrabbit.server.io.XMLExportCommand"
            mode="docview"
        />
        -->
    </chain>
</catalog>
