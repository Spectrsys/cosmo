<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Test Page for diff function in date.js</title>

<script type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
<script type="text/javascript" src="../js/date.js"></script>
<script type="text/javascript" src="../js/log.js"></script>

</head>

<body>

<script type="text/javascript">

function doAssert(dtA, dtB, str, res) {
    assertEquals(dtA + ' and ' + dtB + ' (' + str + ') should return ' + res, res, Date.diff(str, dtA, dtB));
}

function testYearDiff() {
    var dtA = null; // First date to compare
    var dtB = null; // Second date to compare
    var res = 0; // Expected number for result
    var str = 'yyyy'; // Unit to test
    
    dtA = new Date('12/27/2005');
    dtB = new Date('12/27/2006');
    res = 1;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('12/31/2005');
    dtB = new Date('1/1/2006');
    res = 1;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('1/1/2006');
    dtB = new Date('12/31/2006');
    res = 0;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('3/1/2003');
    dtB = new Date('3/1/2004');
    res = 1;
    doAssert(dtA, dtB, str, res);
}

function testQuarterDiff() {
    var dtA = null; // First date to compare
    var dtB = null; // Second date to compare
    var res = 0; // Expected number for result
    var str = 'q'; // Unit to test
    
    dtA = new Date('1/1/2006');
    dtB = new Date('4/1/2006');
    res = 1;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('3/31/2006');
    dtB = new Date('4/1/2006');
    res = 1;
    doAssert(dtA, dtB, str, res);

    dtA = new Date('1/1/2006');
    dtB = new Date('1/1/2007');
    res = 4;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('1/1/2007');
    dtB = new Date('1/1/2006');
    res = -4;
    doAssert(dtA, dtB, str, res);
    
    dtA = new Date('12/31/2006');
    dtB = new Date('1/1/2007');
    res = 1;
    doAssert(dtA, dtB, str, res);
    
}

</script>

</body>

</html>

