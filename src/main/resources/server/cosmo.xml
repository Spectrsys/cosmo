<?xml version="1.0" encoding="utf-8"?>

<Context path="" debug="0" docBase="cosmo"
         reloadable="@RELOADABLE@">
  <Environment name="cosmo/version" value="@VERSION@"
               type="java.lang.String" override="false"/>
  <Environment name="cosmo/serverAdmin" value="@SERVER_ADMIN@"
               type="java.lang.String" override="false"/>
  <Resource name="jcr/repositoryFactory"
            type="org.apache.jackrabbit.core.jndi.BindableRepository"/>
  <ResourceParams name="jcr/repositoryFactory">
    <parameter>
      <name>factory</name>
      <value>
        org.apache.jackrabbit.core.jndi.BindableRepositoryFactory
      </value>
    </parameter>
    <parameter>
      <name>configFilePath</name>
      <value>etc/repository.xml</value>
    </parameter>
    <parameter>
      <name>repHomeDir</name>
      <value>data/repository</value>
    </parameter>
  </ResourceParams>
  <Resource name="jdbc/cosmo"
            type="javax.sql.DataSource"/>
  <ResourceParams name="jdbc/cosmo">
    <parameter>
      <name>factory</name>
      <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
    </parameter>
    <parameter>
      <name>maxActive</name>
      <value>5</value>
    </parameter>
    <parameter>
      <name>maxIdle</name>
      <value>3</value>
    </parameter>
    <parameter>
      <name>maxWait</name>
      <value>10000</value>
    </parameter>
    <parameter>
      <name>username</name>
      <value>@DB_USERNAME@</value>
    </parameter>
    <parameter>
      <name>password</name>
      <value>@DB_PASSWORD@</value>
    </parameter>
    <parameter>
      <name>driverClassName</name>
      <value>@DB_DRIVER@</value>
    </parameter>
    <parameter>
      <name>url</name>
      <value>@DB_URL@</value>
    </parameter>
  </ResourceParams>
  <Realm className="org.apache.catalina.realm.DataSourceRealm"
         dataSourceName="jdbc/cosmo"
         roleNameCol="rolename"
         userCredCol="password"
         userNameCol="username"
         userRoleTable="userrole"
         userTable="user"
         digest="MD5"
         debug="0"/>
  <Valve className="org.apache.catalina.valves.AccessLogValve"
         directory="../logs" prefix="access." suffix=".log"
         pattern="combined" resolveHosts="false"/>
</Context>
